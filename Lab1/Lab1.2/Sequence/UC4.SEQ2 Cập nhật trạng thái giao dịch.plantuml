@startuml
title Cập Nhật Trạng Thái Giao Dịch - Sequence Diagram

actor "Người Dùng" as user
participant "Hệ Thống" as system
database "Cơ Sở Dữ Liệu" as database

activate user
user -> system: Yêu Cầu Cập Nhật Trạng Thái Giao Dịch (transactionId, newStatus)
system -> database: Truy vấn Giao Dịch (transactionId)
activate database
database --> system: Trả Về Thông Tin Giao Dịch
system -> system: Kiểm Tra Điều Kiện Cập Nhật
alt Điều Kiện Đúng
    system -> database: Cập Nhật Trạng Thái Giao Dịch (newStatus)
    activate database
    database --> system: Xác Nhận Cập Nhật Trạng Thái Giao Dịch
    deactivate database
    system --> user: Xác Nhận Cập Nhật Trạng Thái Giao Dịch Thành Công
else Điều Kiện Sai
    system --> user: Thông Báo Lỗi: Không Thể Cập Nhật Trạng Thái Giao Dịch
end
deactivate database
deactivate system
deactivate user
@enduml
